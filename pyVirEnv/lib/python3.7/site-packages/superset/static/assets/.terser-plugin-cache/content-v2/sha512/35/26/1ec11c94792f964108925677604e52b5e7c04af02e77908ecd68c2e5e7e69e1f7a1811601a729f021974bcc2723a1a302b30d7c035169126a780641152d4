{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[22,25,26,27,28,29,30,31],{170:function(e,t,r){\"use strict\";r.d(t,\"c\",function(){return l}),r.d(t,\"b\",function(){return p}),r.d(t,\"d\",function(){return d}),r.d(t,\"e\",function(){return y}),r.d(t,\"a\",function(){return m});var n=r(220),o=r.n(n),a=r(491),i=r(198);function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=8e3;function l(e){var t=e.slice;return t?t.slice_id:0}var s=0;function f(){var e=0;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(e=s%a.b.length,s+=1),a.b[e]}function p(e,t,r){if(null==e)return null;var n=r?\"annotation_json\":\"slice_json\";return o()(window.location.search).pathname(\"/superset/\".concat(n,\"/\").concat(e)).search({form_data:Object(i.safeStringify)(t,function(e,t){return null===t?void 0:t})}).toString()}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"base\",r=\"/superset/explore/\";return[\"json\",\"csv\",\"query\",\"results\",\"samples\"].indexOf(t)>=0&&(r=\"/superset/explore_json/\"),r}function d(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!e.datasource)return null;var a=new o.a(\"/\"),u=b(e,t),l=a.search(!0);Object.keys(n).forEach(function(e){l[e]=n[e]}),l.form_data=Object(i.safeStringify)(e),\"standalone\"===t&&(l.standalone=\"true\");var s=a.directory(u).search(l).toString();return!r&&s.length>c?d({datasource:e.datasource,viz_type:e.viz_type},t,!1,{URL_IS_TOO_LONG_TO_SHARE:null}):s}function y(e){var t=e.formData,r=e.endpointType,n=void 0===r?\"base\":r,a=e.force,c=void 0!==a&&a,l=e.curUrl,s=void 0===l?null:l,p=e.requestParams,d=void 0===p?{}:p,y=e.allowDomainSharding,m=void 0!==y&&y,h=e.method,v=void 0===h?\"POST\":h;if(!t.datasource)return null;var g=new o.a({protocol:location.protocol.slice(0,-1),hostname:f(m),port:location.port?location.port:\"\",path:\"/\"});s&&(g=o()(o()(s).search()));var O=b(t,n),w=g.search(!0),_=t.slice_id,j=t.extra_filters,S=t.adhoc_filters,C=t.viz_type;if(_){var k={slice_id:_};\"GET\"===v&&(k.viz_type=C,j&&j.length&&(k.extra_filters=j),S&&S.length&&(k.adhoc_filters=S)),w.form_data=Object(i.safeStringify)(k)}c&&(w.force=\"true\"),\"csv\"===n&&(w.csv=\"true\"),\"standalone\"===n&&(w.standalone=\"true\"),\"query\"===n&&(w.query=\"true\"),\"results\"===n&&(w.results=\"true\"),\"samples\"===n&&(w.samples=\"true\");var P=Object.keys(d);P.length&&P.forEach(function(e){d.hasOwnProperty(e)&&(w[e]=d[e])}),g=g.search(w).directory(O);var E=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);\"function\"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){u(e,t,r[t])})}return e}({},t);return{url:g.toString(),payload:E}}function m(e,t){var r=y({formData:e,endpointType:t,allowDomainSharding:!1}),n=r.url,o=r.payload,a=document.createElement(\"form\");a.action=n,a.method=\"POST\",a.target=\"_blank\";var u=document.createElement(\"input\");u.type=\"hidden\",u.name=\"csrf_token\",u.value=(document.getElementById(\"csrf_token\")||{}).value,a.appendChild(u);var c=document.createElement(\"input\");c.type=\"hidden\",c.name=\"form_data\",c.value=Object(i.safeStringify)(o),a.appendChild(c),document.body.appendChild(a),a.submit(),document.body.removeChild(a)}},1936:function(e,t,r){\"use strict\";r.d(t,\"a\",function(){return u});var n=r(1),o=r.n(n),a=r(1937),i=r.n(a);r(2129),r(2128);function u(e){return o.a.createElement(\"span\",{className:\"BootstrapSliderWrapper\"},o.a.createElement(i.a,e))}},198:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.safeStringify=function(e){var t=new Set;return JSON.stringify(e,function(e,r){if(\"object\"==typeof r&&null!==r){if(t.has(r))try{return JSON.parse(JSON.stringify(r))}catch(e){return}t.add(r)}return r})}},2128:function(e,t,r){},2549:function(e,t,r){\"use strict\";r.d(t,\"b\",function(){return s}),r.d(t,\"a\",function(){return f}),r.d(t,\"c\",function(){return b});var n=r(2736),o=r(17),a=r(2550);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=.25,c={LAT_MIN:-90,LAT_MAX:90,LNG_MIN:-180,LNG_MAX:180};function l(e){var t=o.extent(e,function(e){return e[1]}),r=o.extent(e,function(e){return e[0]}),n=t[0]===t[1]?function(e){return[e[0]-u<c.LAT_MIN?c.LAT_MIN:e[0]-u,e[1]+u>c.LAT_MAX?c.LAT_MAX:e[1]+u]}(t):t,a=r[0]===r[1]?function(e){return[e[0]-u<c.LNG_MIN?c.LNG_MIN:e[0]-u,e[1]+u>c.LNG_MAX?c.LNG_MAX:e[1]+u]}(r):r;return[[a[0],n[0]],[a[1],n[1]]]}function s(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;try{var o=l(t);return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);\"function\"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){i(e,t,r[t])})}return e}({},e,Object(n.a)({height:e.height,width:e.width,padding:r,bounds:o}))}catch(t){return console.error(\"Could not auto zoom\",t),e}}function f(e,t,r,n){var o,i,u=e,c=r;return u.js_tooltip&&(c=Object(a.a)(u.js_tooltip)),c&&(o=function(e){e.picked?t({content:c(e),x:e.x,y:e.y+30}):t(null)}),u.js_onclick_href?i=function(e){var t=Object(a.a)(u.js_onclick_href)(e);window.open(t)}:u.table_filter&&void 0!==n&&(i=function(e){return n(e.object[u.line_column])}),{onClick:i,onHover:o,pickable:Boolean(o)}}var p={p1:.01,p5:.05,p95:.95,p99:.99};function b(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"sum\",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return\"count\"===t?function(e){return e.length}:(e=t in p?function(e,n){var a;return a=r?e.sort(function(e,t){return o.ascending(r(e),r(t))}):e.sort(o.ascending),o.quantile(a,p[t],n)}:o[t],r?function(t){return e(t.map(r))}:function(t){return e(t)})}},2550:function(e,t,r){\"use strict\";r.d(t,\"a\",function(){return f});var n=r(2581),o=r.n(n),a=r(2582),i=r.n(a),u=r(17),c=r(2553);function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s={console:console,_:i.a,colors:c,d3array:u};function f(e,t,r){var n={},a=\"SAFE_EVAL_\"+Math.floor(1e6*Math.random());n[a]={};var i=a+\"=\"+e,u=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);\"function\"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){l(e,t,r[t])})}return e}({},s,t);Object.keys(u).forEach(function(e){n[e]=u[e]});try{return o.a.runInNewContext(i,n,r),n[a]}catch(e){return function(){return e}}}},2553:function(e,t,r){\"use strict\";r.r(t),r.d(t,\"hexToRGB\",function(){return o});var n=r(62);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255;if(!e)return[0,0,0,t];var r=Object(n.f)(e);return[r.r,r.g,r.b,t]}},2557:function(e,t,r){\"use strict\";r.d(t,\"a\",function(){return w});var n=r(226),o=r.n(n),a=r(1),i=r.n(a),u=r(0),c=r.n(u),l=r(2576),s=r(2558);r(2577),r(2566);function f(e){return(f=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);\"function\"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){d(e,t,r[t])})}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}var g=2e3,O={viewport:c.a.object.isRequired,layers:c.a.array.isRequired,setControlValue:c.a.func,mapStyle:c.a.string,mapboxApiAccessToken:c.a.string.isRequired,onViewportChange:c.a.func},w=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),n=this,(r=!(o=m(t).call(this,e))||\"object\"!==f(o)&&\"function\"!=typeof o?v(n):o).tick=r.tick.bind(v(v(r))),r.onViewportChange=r.onViewportChange.bind(v(v(r))),r.state={previousViewport:e.viewport,timer:setInterval(r.tick,g)},r}var r,n,a;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,i.a.Component),r=t,a=[{key:\"getDerivedStateFromProps\",value:function(e,t){return e.viewport!==t.viewport?{viewport:b({},e.viewport),previousViewport:t.viewport}:null}}],(n=[{key:\"componentWillUnmount\",value:function(){clearInterval(this.state.timer)}},{key:\"onViewportChange\",value:function(e){var t=Object.assign({},e),r=b({},this.state.previousViewport,t);this.props.onViewportChange(r)}},{key:\"tick\",value:function(){var e=this;if(this.state&&!o()(this.state.previousViewport,this.props.viewport)){var t=this.props.setControlValue,r=this.props.viewport;t&&t(\"viewport\",r),this.setState(function(){return{previousViewport:e.props.viewport}})}}},{key:\"layers\",value:function(){return this.props.layers.some(function(e){return\"function\"==typeof e})?this.props.layers.map(function(e){return\"function\"==typeof e?e():e}):this.props.layers}},{key:\"render\",value:function(){var e=this.props.viewport;return i.a.createElement(l.b,p({},e,{mapStyle:this.props.mapStyle,onViewportChange:this.onViewportChange,mapboxApiAccessToken:this.props.mapboxApiAccessToken}),i.a.createElement(s.i,p({},e,{layers:this.layers(),initWebGLParameters:!0})))}}])&&y(r.prototype,n),a&&y(r,a),t}();w.propTypes=O,w.defaultProps={mapStyle:\"light\",onViewportChange:function(){},setControlValue:function(){}}},2560:function(e,t,r){\"use strict\";r.d(t,\"a\",function(){return b});var n=r(1),o=r.n(n),a=r(0),i=r.n(a);function u(e){return(u=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||\"object\"!==u(t)&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p={label:i.a.string.isRequired,value:i.a.string.isRequired},b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),l(this,s(t).apply(this,arguments))}var r,n,a;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,o.a.PureComponent),r=t,(n=[{key:\"render\",value:function(){return o.a.createElement(\"div\",null,this.props.label,o.a.createElement(\"strong\",null,this.props.value))}}])&&c(r.prototype,n),a&&c(r,a),t}();b.propTypes=p},2566:function(e,t,r){},2567:function(e,t,r){\"use strict\";r.d(t,\"a\",function(){return c});var n=r(8),o=r.n(n);function a(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}()}var i=[1,0,1,0,0,0,0];function u(e,t){var r=parseInt(o()(t).format(\"x\"),10);return parseInt(o()(t).add(e).format(\"x\"),10)-r}var c=function(e,t){var r,n,c=o()(Math.min.apply(Math,a(e))),l=o()(Math.max.apply(Math,a(e)));if(-1!==t.indexOf(\"/\")){var s=t.split(\"/\",2);s[0].endsWith(\"Z\")?(n=o()(s[0]),r=o.a.duration(s[1])):(n=o()(s[1]),r=o.a.duration(s[0]))}else n=function(e,t){var r=o()(e).subtract(t),n=e.toArray(),a=r.toArray(),u=n.map(function(e,t){return a[t]!==e}).indexOf(!0),c=n.map(function(e,t){if(t===u){var r=e-a[t];return e-(e-i[t])%r}return t<u||-1===u?e:i[t]});return o()(c)}(c,r=o.a.duration(t));for(var f=o()(n);f<c;)f.add(r);for(;f>c;)f.subtract(r);for(var p=o()(n);p>l;)p.subtract(r);for(;p<l;)p.add(r);var b=null!=t?[f,o()(f).add(r)]:[f,p],d=e.every(function(e){return null===e});return{start:parseInt(f.format(\"x\"),10),end:parseInt(p.format(\"x\"),10),getStep:u.bind(this,r),values:b.map(function(e){return parseInt(e.format(\"x\"),10)}),disabled:d}}},2568:function(e,t,r){\"use strict\";var n=r(1),o=r.n(n),a=r(0),i=r.n(a),u=r(2557),c=r(1032),l=r.n(c),s=r(28),f=r(1936);r(2569);function p(e){return(p=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}var h={start:i.a.number.isRequired,step:i.a.number.isRequired,end:i.a.number.isRequired,values:i.a.array.isRequired,onChange:i.a.func,loopDuration:i.a.number,maxFrames:i.a.number,orientation:i.a.oneOf([\"horizontal\",\"vertical\"]),reversed:i.a.bool,disabled:i.a.bool,range:i.a.bool},v=function(e){function t(e){var r,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),n=this,(r=!(o=d(t).call(this,e))||\"object\"!==p(o)&&\"function\"!=typeof o?m(n):o).state={intervalId:null};var a=e.end-e.start,i=Math.min(e.maxFrames,a/e.step),u=a/i;return r.intervalMilliseconds=e.loopDuration/i,r.increment=u<e.step?e.step:u-u%e.step,r.onChange=r.onChange.bind(m(m(r))),r.play=r.play.bind(m(m(r))),r.pause=r.pause.bind(m(m(r))),r.stepBackward=r.stepBackward.bind(m(m(r))),r.stepForward=r.stepForward.bind(m(m(r))),r.getPlayClass=r.getPlayClass.bind(m(m(r))),r.formatter=r.formatter.bind(m(m(r))),r}var r,n,a;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,o.a.PureComponent),r=t,(n=[{key:\"componentDidMount\",value:function(){l.a.bind([\"space\"],this.play)}},{key:\"componentWillUnmount\",value:function(){l.a.unbind([\"space\"])}},{key:\"onChange\",value:function(e){this.props.onChange(e.target.value),null!=this.state.intervalId&&this.pause()}},{key:\"getPlayClass\",value:function(){return null==this.state.intervalId?\"fa fa-play fa-lg slider-button\":\"fa fa-pause fa-lg slider-button\"}},{key:\"play\",value:function(){if(!this.props.disabled)if(null!=this.state.intervalId)this.pause();else{var e=setInterval(this.stepForward,this.intervalMilliseconds);this.setState({intervalId:e})}}},{key:\"pause\",value:function(){clearInterval(this.state.intervalId),this.setState({intervalId:null})}},{key:\"stepForward\",value:function(){var e=this,t=this.props,r=t.start,n=t.end,o=t.step,a=t.values;if(!t.disabled){var i=(Array.isArray(a)?a:[a,a+o]).map(function(t){return t+e.increment}),u=i[1]>n?i[0]-r:0;this.props.onChange(i.map(function(e){return e-u}))}}},{key:\"stepBackward\",value:function(){var e=this,t=this.props,r=t.start,n=t.end,o=t.step,a=t.values;if(!t.disabled){var i=(Array.isArray(a)?a:[a,a+o]).map(function(t){return t-e.increment}),u=i[0]<r?n-i[1]:0;this.props.onChange(i.map(function(e){return e+u}))}}},{key:\"formatter\",value:function(e){if(this.props.disabled)return Object(s.b)(\"Data has no time steps\");var t=e;return Array.isArray(e)?e[0]===e[1]&&(t=[e[0]]):t=[e],t.map(function(e){return new Date(e).toUTCString()}).join(\" : \")}},{key:\"render\",value:function(){var e=this.props,t=e.start,r=e.end,n=e.step,a=e.orientation,i=e.reversed,u=e.disabled,c=e.range,l=e.values;return o.a.createElement(\"div\",{className:\"play-slider\"},o.a.createElement(\"div\",{className:\"play-slider-controls padded\"},o.a.createElement(\"i\",{className:\"fa fa-step-backward fa-lg slider-button \",onClick:this.stepBackward}),o.a.createElement(\"i\",{className:this.getPlayClass(),onClick:this.play}),o.a.createElement(\"i\",{className:\"fa fa-step-forward fa-lg slider-button \",onClick:this.stepForward})),o.a.createElement(\"div\",{className:\"play-slider-scrobbler padded\"},o.a.createElement(f.a,{value:c?l:l[0],range:c,formatter:this.formatter,change:this.onChange,min:t,max:r,step:n,orientation:a,reversed:i,disabled:u?\"disabled\":\"enabled\"})))}}])&&b(r.prototype,n),a&&b(r,a),t}();function g(e){return(g=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);\"function\"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){w(e,t,r[t])})}return e}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}v.propTypes=h,v.defaultProps={onChange:function(){},loopDuration:15e3,maxFrames:100,orientation:\"horizontal\",reversed:!1,disabled:!1,range:!0},r.d(t,\"a\",function(){return P});var k={getLayers:i.a.func.isRequired,start:i.a.number.isRequired,end:i.a.number.isRequired,getStep:i.a.func,values:i.a.array.isRequired,aggregation:i.a.bool,disabled:i.a.bool,viewport:i.a.object.isRequired,children:i.a.node,mapStyle:i.a.string,mapboxApiAccessToken:i.a.string.isRequired,setControlValue:i.a.func,onViewportChange:i.a.func,onValuesChange:i.a.func},P=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),n=this,(r=!(o=j(t).call(this,e))||\"object\"!==g(o)&&\"function\"!=typeof o?C(n):o).onViewportChange=r.onViewportChange.bind(C(C(r))),r}var r,n,a;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,o.a.Component),r=t,(n=[{key:\"onViewportChange\",value:function(e){var t=this.props.disabled?O({},e):O({},e,{height:e.height+20});this.props.onViewportChange(t)}},{key:\"render\",value:function(){var e=this.props,t=e.start,r=e.end,n=e.getStep,a=e.disabled,i=e.aggregation,c=e.children,l=e.getLayers,s=e.values,f=e.onValuesChange,p=e.viewport,b=e.setControlValue,d=e.mapStyle,y=e.mapboxApiAccessToken,m=l(s),h=O({},p,{height:a?p.height:p.height-20});return o.a.createElement(\"div\",null,o.a.createElement(u.a,{viewport:h,layers:m,setControlValue:b,mapStyle:d,mapboxApiAccessToken:y,onViewportChange:this.onViewportChange}),!a&&o.a.createElement(v,{start:t,end:r,step:n(t),values:s,range:!i,onChange:f}),c)}}])&&_(r.prototype,n),a&&_(r,a),t}();P.propTypes=k,P.defaultProps={aggregation:!1,disabled:!1,mapStyle:\"light\",setControlValue:function(){},onViewportChange:function(){},onValuesChange:function(){}}},2569:function(e,t,r){},2570:function(e,t,r){\"use strict\";var n=r(226),o=r.n(n),a=r(1),i=r.n(a),u=r(0),c=r.n(u),l=r(2557),s=r(158),f=r(2568),p=r(2572),b=r(2553),d=r(2567),y=r(2550),m=r(2549);function h(e){return(h=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function v(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}()}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);\"function\"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){O(e,t,r[t])})}return e}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}var C=s.CategoricalColorNamespace.getScale;var k={formData:c.a.object.isRequired,mapboxApiKey:c.a.string.isRequired,setControlValue:c.a.func.isRequired,viewport:c.a.object.isRequired,getLayer:c.a.func.isRequired,getPoints:c.a.func.isRequired,payload:c.a.object.isRequired,onAddFilter:c.a.func,setTooltip:c.a.func},P=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),n=this,(r=!(o=_(t).call(this,e))||\"object\"!==h(o)&&\"function\"!=typeof o?S(n):o).state=r.getStateFromProps(e),r.getLayers=r.getLayers.bind(S(S(r))),r.onValuesChange=r.onValuesChange.bind(S(S(r))),r.onViewportChange=r.onViewportChange.bind(S(S(r))),r.toggleCategory=r.toggleCategory.bind(S(S(r))),r.showSingleCategory=r.showSingleCategory.bind(S(S(r))),r}var r,n,o;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,i.a.PureComponent),r=t,(n=[{key:\"componentWillReceiveProps\",value:function(e){e.payload.form_data!==this.state.formData&&this.setState(g({},this.getStateFromProps(e)))}},{key:\"onValuesChange\",value:function(e){this.setState({values:Array.isArray(e)?e:[e,e+this.state.getStep(e)]})}},{key:\"onViewportChange\",value:function(e){this.setState({viewport:e})}},{key:\"getStateFromProps\",value:function(e,t){var r=e.payload.data.features||[],n=r.map(function(e){return e.__timestamp}),o=function(e,t){var r=e.color_picker||{r:0,g:0,b:0,a:1},n=[r.r,r.g,r.b,255*r.a],o=C(e.color_scheme),a={};return t.forEach(function(t){var i;null==t.cat_color||a.hasOwnProperty(t.cat_color)||(i=e.dimension?Object(b.hexToRGB)(o(t.cat_color),255*r.a):n,a[t.cat_color]={color:i,enabled:!0})}),a}(e.formData,r);if(t&&e.payload.form_data===t.formData)return g({},t,{categories:o});var a=e.payload.form_data.time_grain_sqla||e.payload.form_data.granularity||\"P1D\",i=Object(d.a)(n,a);return{start:i.start,end:i.end,getStep:i.getStep,values:i.values,disabled:i.disabled,viewport:e.formData.autozoom?Object(m.b)(e.viewport,e.getPoints(r)):e.viewport,selected:[],lastClick:0,formData:e.payload.form_data,categories:o}}},{key:\"getLayers\",value:function(e){var t=this.props,r=t.getLayer,n=t.payload,o=t.formData,a=t.onAddFilter,i=t.setTooltip,u=n.data.features?v(n.data.features):[];(u=this.addColor(u,o),o.js_data_mutator)&&(u=Object(y.a)(o.js_data_mutator)(u));u=e[0]===e[1]||e[1]===this.end?u.filter(function(t){return t.__timestamp>=e[0]&&t.__timestamp<=e[1]}):u.filter(function(t){return t.__timestamp>=e[0]&&t.__timestamp<e[1]});var c=this.state.categories;return o.dimension&&(u=u.filter(function(e){return c[e.cat_color]&&c[e.cat_color].enabled})),[r(o,g({},n,{data:g({},n.data,{features:u})}),a,i)]}},{key:\"addColor\",value:function(e,t){var r=t.color_picker||{r:0,g:0,b:0,a:1},n=C(t.color_scheme);return e.map(function(e){return t.dimension?g({},e,{color:Object(b.hexToRGB)(n(e.cat_color),255*r.a)}):e})}},{key:\"toggleCategory\",value:function(e){var t=this.state.categories[e],r=g({},this.state.categories,O({},e,g({},t,{enabled:!t.enabled})));Object.values(r).every(function(e){return!e.enabled})&&Object.values(r).forEach(function(e){e.enabled=!0}),this.setState({categories:r})}},{key:\"showSingleCategory\",value:function(e){var t=g({},this.state.categories);Object.values(t).forEach(function(e){e.enabled=!1}),t[e].enabled=!0,this.setState({categories:t})}},{key:\"render\",value:function(){return i.a.createElement(\"div\",{style:{position:\"relative\"}},i.a.createElement(f.a,{getLayers:this.getLayers,start:this.state.start,end:this.state.end,getStep:this.state.getStep,values:this.state.values,onValuesChange:this.onValuesChange,disabled:this.state.disabled,viewport:this.state.viewport,onViewportChange:this.onViewportChange,mapboxApiAccessToken:this.props.mapboxApiKey,mapStyle:this.props.formData.mapbox_style,setControlValue:this.props.setControlValue},i.a.createElement(p.a,{categories:this.state.categories,toggleCategory:this.toggleCategory,showSingleCategory:this.showSingleCategory,position:this.props.formData.legend_position})))}}])&&w(r.prototype,n),o&&w(r,o),t}();function E(e){return(E=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);\"function\"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){x(e,t,r[t])})}return e}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}P.propTypes=k,r.d(t,\"b\",function(){return F}),r.d(t,\"a\",function(){return M});var R={formData:c.a.object.isRequired,payload:c.a.object.isRequired,setControlValue:c.a.func.isRequired,viewport:c.a.object.isRequired,onAddFilter:c.a.func,setTooltip:c.a.func},q={onAddFilter:function(){},setTooltip:function(){}};function F(e,t){var r=function(r){function n(e){var r,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,n),o=this,r=!(a=T(n).call(this,e))||\"object\"!==E(a)&&\"function\"!=typeof a?D(o):a;var i=e.viewport,u=e.formData.autozoom?Object(m.b)(i,t(e.payload.data.features)):i;return r.state={viewport:u,layer:r.computeLayer(e)},r.onViewportChange=r.onViewportChange.bind(D(D(r))),r}var a,u,c;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(n,i.a.PureComponent),a=n,(u=[{key:\"componentWillReceiveProps\",value:function(e){var t=A({},e.formData,{viewport:null}),r=A({},this.props.formData,{viewport:null});o()(t,r)&&e.payload===this.props.payload||this.setState({layer:this.computeLayer(e)})}},{key:\"onViewportChange\",value:function(e){this.setState({viewport:e})}},{key:\"computeLayer\",value:function(t){var r=t.formData,n=t.payload,o=t.onAddFilter,a=t.setTooltip;return e(r,n,o,a)}},{key:\"render\",value:function(){var e=this.props,t=e.formData,r=e.payload,n=e.setControlValue,o=this.state,a=o.layer,u=o.viewport;return i.a.createElement(l.a,{mapboxApiAccessToken:r.data.mapboxApiKey,viewport:u,layers:[a],mapStyle:t.mapbox_style,setControlValue:n,onViewportChange:this.onViewportChange})}}])&&V(a.prototype,u),c&&V(a,c),n}();return r.propTypes=R,r.defaultProps=q,r}function M(e,t){function r(r){var n=r.formData,o=r.payload,a=r.setControlValue,u=r.onAddFilter,c=r.setTooltip,l=r.viewport;return i.a.createElement(P,{formData:n,mapboxApiKey:o.data.mapboxApiKey,setControlValue:a,viewport:l,getLayer:e,payload:o,onAddFilter:u,setTooltip:c,getPoints:t})}return r.propTypes=R,r.defaultProps=q,r}},2572:function(e,t,r){\"use strict\";r.d(t,\"a\",function(){return y});var n=r(1),o=r.n(n),a=r(0),i=r.n(a);r(2573);function u(e){return(u=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return r}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return!t||\"object\"!==u(t)&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d={categories:i.a.object,toggleCategory:i.a.func,showSingleCategory:i.a.func,position:i.a.oneOf([null,\"tl\",\"tr\",\"bl\",\"br\"])},y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),f(this,p(t).apply(this,arguments))}var r,n,a;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,o.a.PureComponent),r=t,(n=[{key:\"render\",value:function(){var e,t=this;if(0===Object.keys(this.props.categories).length||null===this.props.position)return null;var r=Object.entries(this.props.categories).map(function(e){var r=l(e,2),n=r[0],a=r[1],i={color:\"rgba(\"+a.color.join(\", \")+\")\"},u=a.enabled?\"◼\":\"◻\";return o.a.createElement(\"li\",{key:n},o.a.createElement(\"a\",{href:\"#\",onClick:function(){return t.props.toggleCategory(n)},onDoubleClick:function(){return t.props.showSingleCategory(n)}},o.a.createElement(\"span\",{style:i},u),\" \",n))}),n=\"t\"===this.props.position.charAt(0)?\"top\":\"bottom\",a=\"r\"===this.props.position.charAt(1)?\"right\":\"left\",i=(c(e={position:\"absolute\"},n,\"0px\"),c(e,a,\"10px\"),e);return o.a.createElement(\"div\",{className:\"legend\",style:i},o.a.createElement(\"ul\",{className:\"categories\"},r))}}])&&s(r.prototype,n),a&&s(r,a),t}();y.propTypes=d,y.defaultProps={categories:{},toggleCategory:function(){},showSingleCategory:function(){},position:\"tr\"}},2573:function(e,t,r){},2578:function(e,t){},2579:function(e,t){},2580:function(e,t){},2629:function(e,t,r){\"use strict\";r.r(t),r.d(t,\"getLayer\",function(){return f});var n=r(2558),o=r(1),a=r.n(o),i=r(28),u=r(2549),c=r(2570),l=r(2560);function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t,r,o){var c,f=t.data.features,p=e.color_picker,b=e.target_color_picker;return new n.a(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);\"function\"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){s(e,t,r[t])})}return e}({id:\"path-layer-\".concat(e.slice_id),data:f,getSourceColor:function(e){return e.sourceColor||e.color||[p.r,p.g,p.b,255*p.a]},getTargetColor:function(e){return e.targetColor||e.color||[b.r,b.g,b.b,255*b.a]},strokeWidth:e.stroke_width?e.stroke_width:3},Object(u.a)(e,o,(c=e,function(e){return a.a.createElement(\"div\",{className:\"deckgl-tooltip\"},a.a.createElement(l.a,{label:\"\".concat(Object(i.b)(\"Start (Longitude, Latitude)\"),\": \"),value:\"\".concat(e.object.sourcePosition[0],\", \").concat(e.object.sourcePosition[1])}),a.a.createElement(l.a,{label:\"\".concat(Object(i.b)(\"End (Longitude, Latitude)\"),\": \"),value:\"\".concat(e.object.targetPosition[0],\", \").concat(e.object.targetPosition[1])}),c.dimension&&a.a.createElement(l.a,{label:\"\".concat(c.dimension,\": \"),value:\"\".concat(e.object.cat_color)}))}))))}t.default=Object(c.a)(f,function(e){var t=[];return e.forEach(function(e){t.push(e.sourcePosition),t.push(e.targetPosition)}),t})},2652:function(e,t,r){\"use strict\";r.r(t),r.d(t,\"getLayer\",function(){return O});var n=r(1),o=r.n(n),a=r(0),i=r.n(a),u=r(2558),c=r(2557),l=r(2553),s=r(2550),f=r(2549),p=r(2560);function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);\"function\"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){d(e,t,r[t])})}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y,m={fillColor:\"fillColor\",color:\"fillColor\",fill:\"fillColor\",\"fill-color\":\"fillColor\",strokeColor:\"strokeColor\",\"stroke-color\":\"strokeColor\",\"stroke-width\":\"strokeWidth\"},h=function(e,t){var r={};return Object.keys(e).forEach(function(t){t in m?r[m[t]]=e[t]:r[t]=e[t]}),\"string\"==typeof e.fillColor&&(r.fillColor=Object(l.hexToRGB)(e.fillColor)),\"string\"==typeof e.strokeColor&&(r.strokeColor=Object(l.hexToRGB)(e.strokeColor)),b({},r,t)},v=function e(t,r,n){if(t&&t.features&&t.features.forEach(function(o){e(o,r,t.extraProps||n)}),t&&t.geometry){var o=b({},t,{properties:h(t.properties,r)});o.extraProps||(o.extraProps=n),y.push(o)}};function g(e){return e.object.extraProps&&o.a.createElement(\"div\",{className:\"deckgl-tooltip\"},Object.keys(e.object.extraProps).map(function(t,r){return o.a.createElement(p.a,{key:\"prop-\".concat(r),label:\"\".concat(t,\": \"),value:\"\".concat(e.object.extraProps[t])})}))}function O(e,t,r,n){var o,a=e,i=a.fill_color_picker,c=a.stroke_color_picker,l=[i.r,i.g,i.b,255*i.a],p=[c.r,c.g,c.b,255*c.a],d={};return l[3]>0&&(d.fillColor=l),p[3]>0&&(d.strokeColor=p),y=[],v(t.data,d),a.js_data_mutator&&(o=Object(s.a)(a.js_data_mutator),y=o(y)),new u.b(b({id:\"geojson-layer-\".concat(a.slice_id),filled:a.filled,data:y,stroked:a.stroked,extruded:a.extruded,pointRadiusScale:a.point_radius_scale},Object(f.a)(a,n,g)))}var w={formData:i.a.object.isRequired,payload:i.a.object.isRequired,setControlValue:i.a.func.isRequired,viewport:i.a.object.isRequired,onAddFilter:i.a.func,setTooltip:i.a.func};function _(e){var t=e.formData,r=e.payload,n=e.setControlValue,a=(e.onAddFilter,e.setTooltip),i=e.viewport,u=O(t,r,0,a);return o.a.createElement(c.a,{mapboxApiAccessToken:r.data.mapboxApiKey,viewport:i,layers:[u],mapStyle:t.mapbox_style,setControlValue:n})}_.propTypes=w,_.defaultProps={onAddFilter:function(){},setTooltip:function(){}},t.default=_},2653:function(e,t,r){\"use strict\";r.r(t),r.d(t,\"getLayer\",function(){return d});var n=r(2558),o=r(1),a=r.n(o),i=r(28),u=r(2549),c=r(2550),l=r(2570),s=r(2560);function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);\"function\"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){p(e,t,r[t])})}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e){return a.a.createElement(\"div\",{className:\"deckgl-tooltip\"},a.a.createElement(s.a,{label:\"\".concat(Object(i.b)(\"Longitude and Latitude\"),\": \"),value:\"\".concat(e.object.position[0],\", \").concat(e.object.position[1])}),a.a.createElement(s.a,{label:\"\".concat(Object(i.b)(\"Height\"),\": \"),value:\"\".concat(e.object.elevationValue)}))}function d(e,t,r,o){var a=e,i=a.color_picker,l=t.data.features.map(function(e){return f({},e,{color:[i.r,i.g,i.b,255*i.a]})});a.js_data_mutator&&(l=Object(c.a)(a.js_data_mutator)(l));var s=Object(u.c)(a.js_agg_function,function(e){return e.weight});return new n.c(f({id:\"grid-layer-\".concat(a.slice_id),data:l,pickable:!0,cellSize:a.grid_size,minColor:[0,0,0,0],extruded:a.extruded,maxColor:[i.r,i.g,i.b,255*i.a],outline:!1,getElevationValue:s,getColorValue:s},Object(u.a)(a,o,b)))}t.default=Object(l.b)(d,function(e){return e.map(function(e){return e.position})})},2654:function(e,t,r){\"use strict\";r.r(t),r.d(t,\"getLayer\",function(){return d});var n=r(2558),o=r(1),a=r.n(o),i=r(28),u=r(2549),c=r(2550),l=r(2570),s=r(2560);function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);\"function\"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){p(e,t,r[t])})}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e){return a.a.createElement(\"div\",{className:\"deckgl-tooltip\"},a.a.createElement(s.a,{label:\"\".concat(Object(i.b)(\"Centroid (Longitude and Latitude)\"),\": \"),value:\"(\".concat(e.object.centroid[0],\", \").concat(e.object.centroid[1],\")\")}),a.a.createElement(s.a,{label:\"\".concat(Object(i.b)(\"Height\"),\": \"),value:\"\".concat(e.object.elevationValue)}))}function d(e,t,r,o){var a=e,i=a.color_picker,l=t.data.features.map(function(e){return f({},e,{color:[i.r,i.g,i.b,255*i.a]})});a.js_data_mutator&&(l=Object(c.a)(a.js_data_mutator)(l));var s=Object(u.c)(a.js_agg_function,function(e){return e.weight});return new n.d(f({id:\"hex-layer-\".concat(a.slice_id),data:l,pickable:!0,radius:a.grid_size,minColor:[0,0,0,0],extruded:a.extruded,maxColor:[i.r,i.g,i.b,255*i.a],outline:!1,getElevationValue:s,getColorValue:s},Object(u.a)(a,o,b)))}t.default=Object(l.b)(d,function(e){return e.map(function(e){return e.position})})},2655:function(e,t,r){\"use strict\";r.r(t),r.d(t,\"getLayer\",function(){return _});var n=r(1),o=r.n(n),a=r(0),i=r.n(a),u=r(2558),c=r(28),l=r(2568),s=r(2567),f=r(2550),p=r(2549),b=r(2560);function d(e){return(d=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);\"function\"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){O(e,t,r[t])})}return e}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e){return o.a.createElement(\"div\",{className:\"deckgl-tooltip\"},o.a.createElement(b.a,{label:\"\".concat(Object(c.b)(\"Longitude and Latitude\"),\": \"),value:\"\".concat(e.object.position[0],\", \").concat(e.object.position[1])}),o.a.createElement(b.a,{label:\"\".concat(Object(c.b)(\"Weight\"),\": \"),value:\"\".concat(e.object.weight)}))}function _(e,t,r,n,o,a,i){var c=e,l=c.color_picker,s=t.data.features.map(function(e){return g({},e,{color:[l.r,l.g,l.b,255*l.a]})});if(c.js_data_mutator){var b=Object(f.a)(c.js_data_mutator);s=b(s)}return null!=i&&i.forEach(function(e){s=s.filter(e)}),new u.h(g({id:\"screengrid-layer-\".concat(c.slice_id),data:s,pickable:!0,cellSizePixels:c.grid_size,minColor:[l.r,l.g,l.b,0],maxColor:[l.r,l.g,l.b,255*l.a],outline:!1,getWeight:function(e){return e.weight||0}},Object(p.a)(c,n,w)))}var j={formData:i.a.object.isRequired,payload:i.a.object.isRequired,setControlValue:i.a.func.isRequired,viewport:i.a.object.isRequired,onAddFilter:i.a.func,setTooltip:i.a.func},S=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),n=this,(r=!(o=m(t).call(this,e))||\"object\"!==d(o)&&\"function\"!=typeof o?v(n):o).state=t.getDerivedStateFromProps(e),r.getLayers=r.getLayers.bind(v(v(r))),r.onValuesChange=r.onValuesChange.bind(v(v(r))),r.onViewportChange=r.onViewportChange.bind(v(v(r))),r}var r,n,a;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,o.a.PureComponent),r=t,a=[{key:\"getDerivedStateFromProps\",value:function(e,t){if(t&&e.payload.form_data===t.formData)return null;var r=e.payload.data.features||[],n=r.map(function(e){return e.__timestamp}),o=e.payload.form_data.time_grain_sqla||e.payload.form_data.granularity||\"P1D\",a=Object(s.a)(n,o);return{start:a.start,end:a.end,getStep:a.getStep,values:a.values,disabled:a.disabled,viewport:e.formData.autozoom?Object(p.b)(e.viewport,r.map(function(e){return e.position})):e.viewport,selected:[],lastClick:0,formData:e.payload.form_data}}}],(n=[{key:\"onValuesChange\",value:function(e){this.setState({values:Array.isArray(e)?e:[e,e+this.state.getStep(e)]})}},{key:\"onViewportChange\",value:function(e){this.setState({viewport:e})}},{key:\"getLayers\",value:function(e){var t=[];return e[0]===e[1]||e[1]===this.end?t.push(function(t){return t.__timestamp>=e[0]&&t.__timestamp<=e[1]}):t.push(function(t){return t.__timestamp>=e[0]&&t.__timestamp<e[1]}),[_(this.props.formData,this.props.payload,this.props.onAddFilter,this.props.setTooltip)]}},{key:\"render\",value:function(){var e=this.props,t=e.formData,r=e.payload,n=e.setControlValue;return o.a.createElement(\"div\",null,o.a.createElement(l.a,{getLayers:this.getLayers,start:this.state.start,end:this.state.end,getStep:this.state.getStep,values:this.state.values,onValuesChange:this.onValuesChange,disabled:this.state.disabled,viewport:this.state.viewport,onViewportChange:this.onViewportChange,mapboxApiAccessToken:r.data.mapboxApiKey,mapStyle:t.mapbox_style,setControlValue:n,aggregation:!0}))}}])&&y(r.prototype,n),a&&y(r,a),t}();S.propTypes=j,S.defaultProps={onAddFilter:function(){},setTooltip:function(){}},t.default=S},2656:function(e,t,r){\"use strict\";r.r(t),r.d(t,\"getLayer\",function(){return b});var n=r(2558),o=r(1),a=r.n(o),i=r(2549),u=r(2550),c=r(2570),l=r(2560);function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);\"function\"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){f(e,t,r[t])})}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){return e.object.extraProps&&a.a.createElement(\"div\",{className:\"deckgl-tooltip\"},Object.keys(e.object.extraProps).map(function(t,r){return a.a.createElement(l.a,{key:\"prop-\".concat(r),label:\"\".concat(t,\": \"),value:\"\".concat(e.object.extraProps[t])})}))}function b(e,t,r,o){var a=e,c=a.color_picker,l=[c.r,c.g,c.b,255*c.a],f=t.data.features.map(function(e){return s({},e,{path:e.path,width:a.line_width,color:l})});a.js_data_mutator&&(f=Object(u.a)(a.js_data_mutator)(f));return new n.e(s({id:\"path-layer-\".concat(a.slice_id),data:f,rounded:!0,widthScale:1},Object(i.a)(a,o,p)))}t.default=Object(c.b)(b,function(e){var t=[];return e.forEach(function(e){t=t.concat(e.path)}),t})},2657:function(e,t,r){\"use strict\";r.r(t),r.d(t,\"getLayer\",function(){return b});var n=r(2558),o=r(1),a=r.n(o),i=r(28),u=r(2549),c=r(2570),l=r(2560),s=r(979);function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);\"function\"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){p(e,t,r[t])})}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t,r,o){var c=e,p=t.data.features.map(function(e){var t=Object(s.b)(c.point_unit,e.radius)||10;if(c.multiplier&&(t*=c.multiplier),e.color)return f({},e,{radius:t});var r=c.color_picker||{r:0,g:0,b:0,a:1};return f({},e,{radius:t,color:[r.r,r.g,r.b,255*r.a]})});return new n.g(f({id:\"scatter-layer-\".concat(c.slice_id),data:p,fp64:!0,radiusMinPixels:c.min_radius||null,radiusMaxPixels:c.max_radius||null,outline:!1},Object(u.a)(c,o,function(e){return function(t){return a.a.createElement(\"div\",{className:\"deckgl-tooltip\"},a.a.createElement(l.a,{label:\"\".concat(Object(i.b)(\"Longitude and Latitude\"),\": \"),value:\"\".concat(t.object.position[0],\", \").concat(t.object.position[1])}),t.object.cat_color&&a.a.createElement(l.a,{label:\"\".concat(Object(i.b)(\"Category\"),\": \"),value:\"\".concat(t.object.cat_color)}),t.object.metric&&a.a.createElement(l.a,{label:\"\".concat(e.point_radius_fixed.value.label,\": \"),value:\"\".concat(t.object.metric)}))}}(c))))}t.default=Object(c.a)(b,function(e){return e.map(function(e){return e.position})})},2671:function(e,t,r){\"use strict\";r.r(t);var n=r(1),o=r.n(n),a=r(0),i=r.n(a),u=r(2558),c=r(2568),l=r(2572),s=r(2560),f=r(17),p=r(139),b=r(296),d=r(837),y=r(2553);function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return r}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}var v=10;function g(e,t,r){var n=e.break_points,o=e.num_buckets;if(!t)return[];if(void 0===n||0===n.length){var a=o?parseInt(o,10):v,i=h(Object(f.extent)(t,r),2),u=i[0],c=i[1];if(void 0===u)return[];var l=(c-u)/a,s=0===l?0:Math.max(0,Math.ceil(Math.log10(1/l))),p=c>c.toFixed(s)?1:0;return Array(a+1+p).fill().map(function(e,t){return(u+t*l).toFixed(s)})}return n.sort(function(e,t){return parseFloat(e)-parseFloat(t)})}function O(e,t,r){var n,o,a=e.break_points,i=e.num_buckets,u=e.linear_color_scheme,c=e.opacity,l=a||i?g({break_points:a,num_buckets:i},t,r):null,s=Array.isArray(u)?new b.a({id:\"custom\",colors:u}):Object(d.a)().get(u);if(null!==l){var m=l.length-1,h=m>1?s.getColors(m):[s.colors[s.colors.length-1]],v=h[0],O=h[h.length-1];h.unshift(v),h.push(O);var w=l.map(function(e){return parseFloat(e)});n=Object(p.i)().domain(w).range(h),o=function(e){return e>l[m]||e<l[0]}}else n=s.createLinearScale(Object(f.extent)(t,r)),o=function(){return!1};return function(e){var t=r(e),a=Object(y.hexToRGB)(n(t));return o(t)?a[3]=0:a[3]=c/100*255,a}}var w=r(2549),_=r(2567),j=r(2550);function S(e){return(S=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}()}r.d(t,\"getLayer\",function(){return V});function V(e,t,r,n,a,i,c){var l=e,f=l.fill_color_picker,p=l.stroke_color_picker,b=x(t.data.features);if(null!=c&&c.forEach(function(e){b=b.filter(e)}),l.js_data_mutator){var d=Object(j.a)(l.js_data_mutator);b=d(b)}var y=l.metric?l.metric.label||l.metric:null,m=null===l.metric?function(){return[f.r,f.g,f.b,255*f.a]}:O(l,b,function(e){return e[y]}),h=function(e){var t=m(e);return a.length>0&&-1===a.indexOf(e[l.line_column])&&(t[3]/=2),t},v=l.line_column&&l.metric&&[\"geohash\",\"zipcode\"].indexOf(l.line_type)>=0?function(e){return function(t){var r=e.metric.label||e.metric;return o.a.createElement(\"div\",{className:\"deckgl-tooltip\"},o.a.createElement(s.a,{label:\"\".concat(e.line_column,\": \"),value:\"\".concat(t.object[e.line_column])}),e.metric&&o.a.createElement(s.a,{label:\"\".concat(r,\": \"),value:\"\".concat(t.object[r])}))}}(l):void 0;return new u.f(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);\"function\"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){A(e,t,r[t])})}return e}({id:\"path-layer-\".concat(l.slice_id),data:b,pickable:!0,filled:l.filled,stroked:l.stroked,getPolygon:function(e){return e.polygon},getFillColor:h,getLineColor:[p.r,p.g,p.b,255*p.a],getLineWidth:l.line_width,extruded:l.extruded,getElevation:function(e){return function(e,t){return 0===t(e)[3]?0:e.elevation}(e,h)},elevationScale:l.multiplier,fp64:!0},Object(w.a)(l,n,v,i)))}var T={formData:i.a.object.isRequired,payload:i.a.object.isRequired,setControlValue:i.a.func.isRequired,viewport:i.a.object.isRequired,onAddFilter:i.a.func,setTooltip:i.a.func},L=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),n=this,(r=!(o=k(t).call(this,e))||\"object\"!==S(o)&&\"function\"!=typeof o?E(n):o).state=t.getDerivedStateFromProps(e),r.getLayers=r.getLayers.bind(E(E(r))),r.onSelect=r.onSelect.bind(E(E(r))),r.onValuesChange=r.onValuesChange.bind(E(E(r))),r.onViewportChange=r.onViewportChange.bind(E(E(r))),r}var r,n,a;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,o.a.Component),r=t,a=[{key:\"getDerivedStateFromProps\",value:function(e,t){if(t&&e.payload.form_data===t.formData)return null;var r=e.payload.data.features||[],n=r.map(function(e){return e.__timestamp}),o=e.payload.form_data.time_grain_sqla||e.payload.form_data.granularity||\"P1D\",a=Object(_.a)(n,o);return{start:a.start,end:a.end,getStep:a.getStep,values:a.values,disabled:a.disabled,viewport:e.formData.autozoom?Object(w.b)(e.viewport,function(e){return e.map(function(e){return e.polygon}).flat()}(r)):e.viewport,selected:[],lastClick:0,formData:e.payload.form_data}}}],(n=[{key:\"onSelect\",value:function(e){var t=this.props,r=t.formData,n=t.onAddFilter,o=new Date,a=o-this.state.lastClick<=250,i=x(this.state.selected);if(a)i.splice(0,i.length,e);else if(r.toggle_polygons){var u=i.indexOf(e);-1===u?i.push(e):i.splice(u,1)}else i.splice(0,1,e);this.setState({selected:i,lastClick:o}),r.table_filter&&n(r.line_column,i,!1,!0)}},{key:\"onValuesChange\",value:function(e){this.setState({values:Array.isArray(e)?e:[e,e+this.state.getStep(e)]})}},{key:\"onViewportChange\",value:function(e){this.setState({viewport:e})}},{key:\"getLayers\",value:function(e){if(void 0===this.props.payload.data.features)return[];var t=[];return e[0]===e[1]||e[1]===this.end?t.push(function(t){return t.__timestamp>=e[0]&&t.__timestamp<=e[1]}):t.push(function(t){return t.__timestamp>=e[0]&&t.__timestamp<e[1]}),[V(this.props.formData,this.props.payload,this.props.onAddFilter,this.props.setTooltip,this.state.selected,this.onSelect,t)]}},{key:\"render\",value:function(){var e=this.props,t=e.payload,r=e.formData,n=e.setControlValue,a=this.state,i=a.start,u=a.end,s=a.getStep,f=a.values,p=a.disabled,b=a.viewport,d=r,y=d.metric?d.metric.label||d.metric:null,h=function(e,t,r){var n=g(e,t,r),o=O(e,t,r),a={};return n.slice(1).forEach(function(t,r){var i=n[r]+\" - \"+n[r+1],u=.5*(parseFloat(n[r])+parseFloat(n[r+1])),c=e.metric?e.metric.label||e.metric:null;a[i]={color:o(m({},c||e.metric,u)),enabled:!0}}),a}(r,t.data.features,function(e){return e[y]});return o.a.createElement(\"div\",{style:{position:\"relative\"}},o.a.createElement(c.a,{getLayers:this.getLayers,start:i,end:u,getStep:s,values:f,onValuesChange:this.onValuesChange,disabled:p,viewport:b,onViewportChange:this.onViewportChange,mapboxApiAccessToken:t.data.mapboxApiKey,mapStyle:r.mapbox_style,setControlValue:n,aggregation:!0},null!==r.metric&&o.a.createElement(l.a,{categories:h,position:r.legend_position})))}}])&&C(r.prototype,n),a&&C(r,a),t}();L.propTypes=T,L.defaultProps={onAddFilter:function(){},setTooltip:function(){}};t.default=L},2904:function(e,t,r){\"use strict\";r.r(t);var n=r(226),o=r.n(n),a=r(1),i=r.n(a),u=r(0),c=r.n(u),l=r(141),s=r(2557),f=r(170),p=r(2653),b=r(2655),d=r(2656),y=r(2654),m=r(2657),h=r(2652),v=r(2629),g=r(2671),O={deck_grid:p.getLayer,deck_screengrid:b.getLayer,deck_path:d.getLayer,deck_hex:y.getLayer,deck_scatter:m.getLayer,deck_geojson:h.getLayer,deck_arc:v.getLayer,deck_polygon:g.getLayer};function w(e){return(w=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);\"function\"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){j(e,t,r[t])})}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}()}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}var A={formData:c.a.object.isRequired,payload:c.a.object.isRequired,setControlValue:c.a.func.isRequired,viewport:c.a.object.isRequired,onAddFilter:c.a.func,setTooltip:c.a.func,onSelect:c.a.func},x=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),n=this,(r=!(o=k(t).call(this,e))||\"object\"!==w(o)&&\"function\"!=typeof o?E(n):o).state={subSlicesLayers:{}},r.onViewportChange=r.onViewportChange.bind(E(E(r))),r}var r,n,a;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,i.a.PureComponent),r=t,(n=[{key:\"componentDidMount\",value:function(){var e=this.props,t=e.formData,r=e.payload;this.loadLayers(t,r)}},{key:\"componentWillReceiveProps\",value:function(e){var t=e.formData,r=e.payload;!o()(this.props.formData.deck_slices,e.formData.deck_slices)&&this.loadLayers(t,r)}},{key:\"onViewportChange\",value:function(e){this.setState({viewport:e})}},{key:\"loadLayers\",value:function(e,t,r){var n=this;this.setState({subSlicesLayers:{},viewport:r}),t.data.slices.forEach(function(t){var r=[].concat(S(t.form_data.filters||[]),S(e.filters||[]),S(e.extra_filters||[])),o=_({},t,{form_data:_({},t.form_data,{filters:r})});l.a.get({endpoint:Object(f.d)(o.form_data,\"json\")}).then(function(e){var t=e.json,r=O[o.form_data.viz_type](o.form_data,t,n.props.onAddFilter,n.props.setTooltip,[],n.props.onSelect);n.setState({subSlicesLayers:_({},n.state.subSlicesLayers,j({},o.slice_id,r))})}).catch(function(){})})}},{key:\"render\",value:function(){var e=this.props,t=e.payload,r=e.formData,n=e.setControlValue,o=this.state.subSlicesLayers,a=Object.values(o);return i.a.createElement(s.a,{mapboxApiAccessToken:t.data.mapboxApiKey,viewport:this.state.viewport||this.props.viewport,onViewportChange:this.onViewportChange,layers:a,mapStyle:r.mapbox_style,setControlValue:n})}}])&&C(r.prototype,n),a&&C(r,a),t}();x.propTypes=A,x.defaultProps={onAddFilter:function(){},setTooltip:function(){},onSelect:function(){}};t.default=x},47:function(e,t,r){\"use strict\";r.d(t,\"b\",function(){return n}),r.d(t,\"a\",function(){return o}),r.d(t,\"c\",function(){return a}),r.d(t,\"d\",function(){return i}),r.d(t,\"e\",function(){return u}),r.d(t,\"f\",function(){return c});r(46);function n(e,t){for(var r=[],n=e;n<=t;n++)r.push([n,n.toString()]);return r}function o(e){return e.map(function(e){return[e,e.toString()]})}function a(e,t){return\"\".concat(e,\"__\").concat(t)}function i(e){var t=e.replace(/[\\[]/,\"\\\\[\").replace(/[\\]]/,\"\\\\]\"),r=new RegExp(\"[\\\\?&]\"+t+\"=([^&#]*)\").exec(location.search);return null===r?\"\":decodeURIComponent(r[1].replace(/\\+/g,\" \"))}function u(e){var t;return e&&e.length>0&&(e.forEach(function(e){\"count\"===e.metric_name&&(t=\"count\")}),t||(t=e[0].metric_name)),t}function c(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)}},491:function(e,t,r){\"use strict\";r.d(t,\"b\",function(){return n}),r.d(t,\"a\",function(){return o});var n=function(){var e=document.getElementById(\"app\");if(!e)return[];var t=JSON.parse(e.getAttribute(\"data-bootstrap\")),r=new Set([location.hostname]);return t&&t.common&&t.common.conf&&t.common.conf.SUPERSET_WEBSERVER_DOMAINS&&t.common.conf.SUPERSET_WEBSERVER_DOMAINS.forEach(function(e){r.add(e)}),Array.from(r)}(),o=n.length>1},979:function(e,t,r){\"use strict\";r.d(t,\"a\",function(){return n}),r.d(t,\"b\",function(){return a});r(47);var n={longitude:6.85236157047845,latitude:31.222656842808707,zoom:1,bearing:0,pitch:0},o=1609.34;function a(e,t){return\"square_m\"===e?Math.sqrt(t/Math.PI):\"radius_m\"===e?t:\"radius_km\"===e?1e3*t:\"radius_miles\"===e?t*o:\"square_km\"===e?1e3*Math.sqrt(t/Math.PI):\"square_miles\"===e?Math.sqrt(t/Math.PI)*o:null}}}]);","extractedComments":[]}