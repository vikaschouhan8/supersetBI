{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{237:function(t,e,r){var n=r(530);t.exports=function(t,e){return n(t,e)}},2588:function(t,e,r){\"use strict\";r.d(e,\"b\",function(){return f}),r.d(e,\"a\",function(){return b}),r.d(e,\"c\",function(){return y});var n=r(11),o=r.n(n),i=r(2786),c=r(22),a=r(2589);function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}var s=.25,p={LAT_MIN:-90,LAT_MAX:90,LNG_MIN:-180,LNG_MAX:180};function l(t){var e=c.extent(t,function(t){return t[1]}),r=c.extent(t,function(t){return t[0]}),n=e[0]===e[1]?function(t){return[t[0]-s<p.LAT_MIN?p.LAT_MIN:t[0]-s,t[1]+s>p.LAT_MAX?p.LAT_MAX:t[1]+s]}(e):e,o=r[0]===r[1]?function(t){return[t[0]-s<p.LNG_MIN?p.LNG_MIN:t[0]-s,t[1]+s>p.LNG_MAX?p.LNG_MAX:t[1]+s]}(r):r;return[[o[0],n[0]],[o[1],n[1]]]}function f(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;try{var n=l(e);return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(r,!0).forEach(function(e){o()(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},t,{},Object(i.a)({height:t.height,width:t.width,padding:r,bounds:n}))}catch(e){return console.error(\"Could not auto zoom\",e),t}}function b(t,e,r,n){var o,i,c=t,u=r;return c.js_tooltip&&(u=Object(a.a)(c.js_tooltip)),u&&(o=function(t){t.picked?e({content:u(t),x:t.x,y:t.y+30}):e(null)}),c.js_onclick_href?i=function(t){var e=Object(a.a)(c.js_onclick_href)(t);window.open(e)}:c.table_filter&&void 0!==n&&(i=function(t){return n(t.object[c.line_column])}),{onClick:i,onHover:o,pickable:Boolean(o)}}var v={p1:.01,p5:.05,p95:.95,p99:.99};function y(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"sum\",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return\"count\"===e?function(t){return t.length}:(t=e in v?function(t,n){var o;return o=r?t.sort(function(t,e){return c.ascending(r(t),r(e))}):t.sort(c.ascending),c.quantile(o,v[e],n)}:c[e],r?function(e){return t(e.map(r))}:function(e){return t(e)})}},2589:function(t,e,r){\"use strict\";r.d(e,\"a\",function(){return b});var n=r(11),o=r.n(n),i=r(2622),c=r.n(i),a=r(2623),u=r.n(a),s=r(22),p=r(2592);function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}var f={console:console,_:u.a,colors:p,d3array:s};function b(t,e,r){var n={},i=\"SAFE_EVAL_\"+Math.floor(1e6*Math.random());n[i]={};var a=i+\"=\"+t,u=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(r,!0).forEach(function(e){o()(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},f,{},e);Object.keys(u).forEach(function(t){n[t]=u[t]});try{return c.a.runInNewContext(a,n,r),n[i]}catch(t){return function(){return t}}}},2592:function(t,e,r){\"use strict\";r.r(e),r.d(e,\"hexToRGB\",function(){return o});var n=r(59);function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255;if(!t)return[0,0,0,e];var r=Object(n.f)(t);return[r.r,r.g,r.b,e]}},2596:function(t,e,r){\"use strict\";r.d(e,\"a\",function(){return D});var n=r(55),o=r.n(n),i=r(11),c=r.n(i),a=r(13),u=r.n(a),s=r(17),p=r.n(s),l=r(14),f=r.n(l),b=r(15),v=r.n(b),y=r(10),d=r.n(y),h=r(16),O=r.n(h),w=r(237),g=r.n(w),j=r(1),m=r.n(j),k=r(0),P=r.n(k),C=r(2616),_=r(2597);r(2618),r(2605);function A(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function x(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?A(r,!0).forEach(function(e){c()(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var E=2e3,V={viewport:P.a.object.isRequired,layers:P.a.array.isRequired,setControlValue:P.a.func,mapStyle:P.a.string,mapboxApiAccessToken:P.a.string.isRequired,onViewportChange:P.a.func},D=function(t){function e(t){var r;return u()(this,e),(r=f()(this,v()(e).call(this,t))).tick=r.tick.bind(d()(r)),r.onViewportChange=r.onViewportChange.bind(d()(r)),r.state={previousViewport:t.viewport,timer:setInterval(r.tick,E)},r}return O()(e,t),p()(e,[{key:\"componentWillUnmount\",value:function(){clearInterval(this.state.timer)}},{key:\"onViewportChange\",value:function(t){var e=Object.assign({},t),r=x({},this.state.previousViewport,{},e);this.props.onViewportChange(r)}},{key:\"tick\",value:function(){var t=this;if(this.state&&!g()(this.state.previousViewport,this.props.viewport)){var e=this.props.setControlValue,r=this.props.viewport;e&&e(\"viewport\",r),this.setState(function(){return{previousViewport:t.props.viewport}})}}},{key:\"layers\",value:function(){return this.props.layers.some(function(t){return\"function\"==typeof t})?this.props.layers.map(function(t){return\"function\"==typeof t?t():t}):this.props.layers}},{key:\"render\",value:function(){var t=this.props.viewport;return m.a.createElement(C.b,o()({},t,{mapStyle:this.props.mapStyle,onViewportChange:this.onViewportChange,mapboxApiAccessToken:this.props.mapboxApiAccessToken}),m.a.createElement(_.i,o()({},t,{layers:this.layers(),initWebGLParameters:!0})))}}],[{key:\"getDerivedStateFromProps\",value:function(t,e){return t.viewport!==e.viewport?{viewport:x({},t.viewport),previousViewport:e.viewport}:null}}]),e}(m.a.Component);D.propTypes=V,D.defaultProps={mapStyle:\"light\",onViewportChange:function(){},setControlValue:function(){}}},2599:function(t,e,r){\"use strict\";r.d(e,\"a\",function(){return O});var n=r(13),o=r.n(n),i=r(17),c=r.n(i),a=r(14),u=r.n(a),s=r(15),p=r.n(s),l=r(16),f=r.n(l),b=r(1),v=r.n(b),y=r(0),d=r.n(y),h={label:d.a.string.isRequired,value:d.a.string.isRequired},O=function(t){function e(){return o()(this,e),u()(this,p()(e).apply(this,arguments))}return f()(e,t),c()(e,[{key:\"render\",value:function(){return v.a.createElement(\"div\",null,this.props.label,v.a.createElement(\"strong\",null,this.props.value))}}]),e}(v.a.PureComponent);O.propTypes=h},2605:function(t,e,r){},2619:function(t,e){},2620:function(t,e){},2621:function(t,e){},2697:function(t,e,r){\"use strict\";r.r(e),r.d(e,\"getLayer\",function(){return m});var n=r(11),o=r.n(n),i=r(1),c=r.n(i),a=r(0),u=r.n(a),s=r(2597),p=r(2596),l=r(2592),f=r(2589),b=r(2588),v=r(2599);function y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?y(r,!0).forEach(function(e){o()(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var h,O={fillColor:\"fillColor\",color:\"fillColor\",fill:\"fillColor\",\"fill-color\":\"fillColor\",strokeColor:\"strokeColor\",\"stroke-color\":\"strokeColor\",\"stroke-width\":\"strokeWidth\"},w=function(t,e){var r={};return Object.keys(t).forEach(function(e){e in O?r[O[e]]=t[e]:r[e]=t[e]}),\"string\"==typeof t.fillColor&&(r.fillColor=Object(l.hexToRGB)(t.fillColor)),\"string\"==typeof t.strokeColor&&(r.strokeColor=Object(l.hexToRGB)(t.strokeColor)),d({},r,{},e)},g=function t(e,r,n){if(e&&e.features&&e.features.forEach(function(o){t(o,r,e.extraProps||n)}),e&&e.geometry){var o=d({},e,{properties:w(e.properties,r)});o.extraProps||(o.extraProps=n),h.push(o)}};function j(t){return t.object.extraProps&&c.a.createElement(\"div\",{className:\"deckgl-tooltip\"},Object.keys(t.object.extraProps).map(function(e,r){return c.a.createElement(v.a,{key:\"prop-\".concat(r),label:\"\".concat(e,\": \"),value:\"\".concat(t.object.extraProps[e])})}))}function m(t,e,r,n){var o,i=t,c=i.fill_color_picker,a=i.stroke_color_picker,u=[c.r,c.g,c.b,255*c.a],p=[a.r,a.g,a.b,255*a.a],l={};return u[3]>0&&(l.fillColor=u),p[3]>0&&(l.strokeColor=p),h=[],g(e.data,l),i.js_data_mutator&&(o=Object(f.a)(i.js_data_mutator),h=o(h)),new s.b(d({id:\"geojson-layer-\".concat(i.slice_id),filled:i.filled,data:h,stroked:i.stroked,extruded:i.extruded,pointRadiusScale:i.point_radius_scale},Object(b.a)(i,n,j)))}var k={formData:u.a.object.isRequired,payload:u.a.object.isRequired,setControlValue:u.a.func.isRequired,viewport:u.a.object.isRequired,onAddFilter:u.a.func,setTooltip:u.a.func};function P(t){var e=t.formData,r=t.payload,n=t.setControlValue,o=(t.onAddFilter,t.setTooltip),i=t.viewport,a=m(e,r,0,o);return c.a.createElement(p.a,{mapboxApiAccessToken:r.data.mapboxApiKey,viewport:i,layers:[a],mapStyle:e.mapbox_style,setControlValue:n})}P.propTypes=k,P.defaultProps={onAddFilter:function(){},setTooltip:function(){}},e.default=P}}]);","extractedComments":[]}