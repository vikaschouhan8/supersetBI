(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{226:function(t,e,r){var n=r(471);t.exports=function(t,e){return n(t,e)}},2549:function(t,e,r){"use strict";r.d(e,"b",function(){return f}),r.d(e,"a",function(){return s}),r.d(e,"c",function(){return b});var n=r(2736),o=r(17),i=r(2550);function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c=.25,a={LAT_MIN:-90,LAT_MAX:90,LNG_MIN:-180,LNG_MAX:180};function l(t){var e=o.extent(t,function(t){return t[1]}),r=o.extent(t,function(t){return t[0]}),n=e[0]===e[1]?function(t){return[t[0]-c<a.LAT_MIN?a.LAT_MIN:t[0]-c,t[1]+c>a.LAT_MAX?a.LAT_MAX:t[1]+c]}(e):e,i=r[0]===r[1]?function(t){return[t[0]-c<a.LNG_MIN?a.LNG_MIN:t[0]-c,t[1]+c>a.LNG_MAX?a.LNG_MAX:t[1]+c]}(r):r;return[[i[0],n[0]],[i[1],n[1]]]}function f(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;try{var o=l(e);return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){u(t,e,r[e])})}return t}({},t,Object(n.a)({height:t.height,width:t.width,padding:r,bounds:o}))}catch(e){return console.error("Could not auto zoom",e),t}}function s(t,e,r,n){var o,u,c=t,a=r;return c.js_tooltip&&(a=Object(i.a)(c.js_tooltip)),a&&(o=function(t){t.picked?e({content:a(t),x:t.x,y:t.y+30}):e(null)}),c.js_onclick_href?u=function(t){var e=Object(i.a)(c.js_onclick_href)(t);window.open(e)}:c.table_filter&&void 0!==n&&(u=function(t){return n(t.object[c.line_column])}),{onClick:u,onHover:o,pickable:Boolean(o)}}var p={p1:.01,p5:.05,p95:.95,p99:.99};function b(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sum",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"count"===e?function(t){return t.length}:(t=e in p?function(t,n){var i;return i=r?t.sort(function(t,e){return o.ascending(r(t),r(e))}):t.sort(o.ascending),o.quantile(i,p[e],n)}:o[e],r?function(e){return t(e.map(r))}:function(e){return t(e)})}},2550:function(t,e,r){"use strict";r.d(e,"a",function(){return s});var n=r(2581),o=r.n(n),i=r(2582),u=r.n(i),c=r(17),a=r(2553);function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var f={console:console,_:u.a,colors:a,d3array:c};function s(t,e,r){var n={},i="SAFE_EVAL_"+Math.floor(1e6*Math.random());n[i]={};var u=i+"="+t,c=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){l(t,e,r[e])})}return t}({},f,e);Object.keys(c).forEach(function(t){n[t]=c[t]});try{return o.a.runInNewContext(u,n,r),n[i]}catch(t){return function(){return t}}}},2553:function(t,e,r){"use strict";r.r(e),r.d(e,"hexToRGB",function(){return o});var n=r(62);function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255;if(!t)return[0,0,0,e];var r=Object(n.f)(t);return[r.r,r.g,r.b,e]}},2557:function(t,e,r){"use strict";r.d(e,"a",function(){return O});var n=r(226),o=r.n(n),i=r(1),u=r.n(i),c=r(0),a=r.n(c),l=r(2576),f=r(2558);r(2577),r(2566);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(){return(p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){y(t,e,r[e])})}return t}function y(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var w=2e3,g={viewport:a.a.object.isRequired,layers:a.a.array.isRequired,setControlValue:a.a.func,mapStyle:a.a.string,mapboxApiAccessToken:a.a.string.isRequired,onViewportChange:a.a.func},O=function(t){function e(t){var r,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(r=!(o=h(e).call(this,t))||"object"!==s(o)&&"function"!=typeof o?m(n):o).tick=r.tick.bind(m(m(r))),r.onViewportChange=r.onViewportChange.bind(m(m(r))),r.state={previousViewport:t.viewport,timer:setInterval(r.tick,w)},r}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(e,u.a.Component),r=e,i=[{key:"getDerivedStateFromProps",value:function(t,e){return t.viewport!==e.viewport?{viewport:b({},t.viewport),previousViewport:e.viewport}:null}}],(n=[{key:"componentWillUnmount",value:function(){clearInterval(this.state.timer)}},{key:"onViewportChange",value:function(t){var e=Object.assign({},t),r=b({},this.state.previousViewport,e);this.props.onViewportChange(r)}},{key:"tick",value:function(){var t=this;if(this.state&&!o()(this.state.previousViewport,this.props.viewport)){var e=this.props.setControlValue,r=this.props.viewport;e&&e("viewport",r),this.setState(function(){return{previousViewport:t.props.viewport}})}}},{key:"layers",value:function(){return this.props.layers.some(function(t){return"function"==typeof t})?this.props.layers.map(function(t){return"function"==typeof t?t():t}):this.props.layers}},{key:"render",value:function(){var t=this.props.viewport;return u.a.createElement(l.b,p({},t,{mapStyle:this.props.mapStyle,onViewportChange:this.onViewportChange,mapboxApiAccessToken:this.props.mapboxApiAccessToken}),u.a.createElement(f.i,p({},t,{layers:this.layers(),initWebGLParameters:!0})))}}])&&v(r.prototype,n),i&&v(r,i),e}();O.propTypes=g,O.defaultProps={mapStyle:"light",onViewportChange:function(){},setControlValue:function(){}}},2560:function(t,e,r){"use strict";r.d(e,"a",function(){return b});var n=r(1),o=r.n(n),i=r(0),u=r.n(i);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p={label:u.a.string.isRequired,value:u.a.string.isRequired},b=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,f(e).apply(this,arguments))}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,o.a.PureComponent),r=e,(n=[{key:"render",value:function(){return o.a.createElement("div",null,this.props.label,o.a.createElement("strong",null,this.props.value))}}])&&a(r.prototype,n),i&&a(r,i),e}();b.propTypes=p},2566:function(t,e,r){},2578:function(t,e){},2579:function(t,e){},2580:function(t,e){},2652:function(t,e,r){"use strict";r.r(e),r.d(e,"getLayer",function(){return g});var n=r(1),o=r.n(n),i=r(0),u=r.n(i),c=r(2558),a=r(2557),l=r(2553),f=r(2550),s=r(2549),p=r(2560);function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){y(t,e,r[e])})}return t}function y(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var v,h={fillColor:"fillColor",color:"fillColor",fill:"fillColor","fill-color":"fillColor",strokeColor:"strokeColor","stroke-color":"strokeColor","stroke-width":"strokeWidth"},d=function(t,e){var r={};return Object.keys(t).forEach(function(e){e in h?r[h[e]]=t[e]:r[e]=t[e]}),"string"==typeof t.fillColor&&(r.fillColor=Object(l.hexToRGB)(t.fillColor)),"string"==typeof t.strokeColor&&(r.strokeColor=Object(l.hexToRGB)(t.strokeColor)),b({},r,e)},m=function t(e,r,n){if(e&&e.features&&e.features.forEach(function(o){t(o,r,e.extraProps||n)}),e&&e.geometry){var o=b({},e,{properties:d(e.properties,r)});o.extraProps||(o.extraProps=n),v.push(o)}};function w(t){return t.object.extraProps&&o.a.createElement("div",{className:"deckgl-tooltip"},Object.keys(t.object.extraProps).map(function(e,r){return o.a.createElement(p.a,{key:"prop-".concat(r),label:"".concat(e,": "),value:"".concat(t.object.extraProps[e])})}))}function g(t,e,r,n){var o,i=t,u=i.fill_color_picker,a=i.stroke_color_picker,l=[u.r,u.g,u.b,255*u.a],p=[a.r,a.g,a.b,255*a.a],y={};return l[3]>0&&(y.fillColor=l),p[3]>0&&(y.strokeColor=p),v=[],m(e.data,y),i.js_data_mutator&&(o=Object(f.a)(i.js_data_mutator),v=o(v)),new c.b(b({id:"geojson-layer-".concat(i.slice_id),filled:i.filled,data:v,stroked:i.stroked,extruded:i.extruded,pointRadiusScale:i.point_radius_scale},Object(s.a)(i,n,w)))}var O={formData:u.a.object.isRequired,payload:u.a.object.isRequired,setControlValue:u.a.func.isRequired,viewport:u.a.object.isRequired,onAddFilter:u.a.func,setTooltip:u.a.func};function j(t){var e=t.formData,r=t.payload,n=t.setControlValue,i=(t.onAddFilter,t.setTooltip),u=t.viewport,c=g(e,r,0,i);return o.a.createElement(a.a,{mapboxApiAccessToken:r.data.mapboxApiKey,viewport:u,layers:[c],mapStyle:e.mapbox_style,setControlValue:n})}j.propTypes=O,j.defaultProps={onAddFilter:function(){},setTooltip:function(){}},e.default=j}}]);